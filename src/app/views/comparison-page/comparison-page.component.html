<div class="container">
  <h1 class="mat-display-1">Top Fluctuations</h1>
  <div class="content" [hidden]="requestStatus !== 'SUCCESS'">
    <mat-tab-group>
      <mat-tab>
        <ng-template mat-tab-label>
          Increase
          <app-fluctuation-icon
            [fluctuation]="increaseFluctuation"
          ></app-fluctuation-icon>
        </ng-template>
        <table
          matSort
          mat-table
          [dataSource]="increaseRates"
          class="mat-elevation-z4"
        >
          <ng-container matColumnDef="symbol">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Currency</th>
            <td mat-cell *matCellDef="let rate">{{ rate.symbol }}</td>
          </ng-container>
          <ng-container matColumnDef="difference">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="text-right"
            >
              Difference
            </th>
            <td mat-cell *matCellDef="let rate" class="text-right">
              {{ rate.difference | number: "1.2-2" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="percentage">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="text-right"
            >
              Percentage
            </th>
            <td mat-cell *matCellDef="let rate" class="text-right">
              {{ rate.percentage | percent: "1.2" }}
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>
          Decrease
          <app-fluctuation-icon
            [fluctuation]="decreaseFluctuation"
          ></app-fluctuation-icon>
        </ng-template>
        <table
          matSort
          mat-table
          [dataSource]="decreaseRates"
          class="mat-elevation-z4"
        >
          <ng-container matColumnDef="symbol">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Currency</th>
            <td mat-cell *matCellDef="let rate">{{ rate.symbol }}</td>
          </ng-container>

          <ng-container matColumnDef="difference">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="text-right"
            >
              Difference
            </th>
            <td mat-cell *matCellDef="let rate" class="text-right">
              {{ rate.difference | number: "1.2-4" }}
            </td>
          </ng-container>
          <!-- Weight Column -->
          <ng-container matColumnDef="percentage">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="text-right"
            >
              Percentage
            </th>
            <td mat-cell *matCellDef="let rate" class="text-right">
              {{ rate.percentage | percent: "1.2" }}
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </mat-tab>
    </mat-tab-group>
  </div>
  <div class="content" *ngIf="requestStatus === 'LOADING'">
    <p class="mat-headline">Loading rates...</p>
  </div>
  <div class="content" *ngIf="requestStatus === 'ERROR'">
    <p class="mat-headline">{{ errorMessage }}</p>
  </div>
</div>
